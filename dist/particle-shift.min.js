/*! For license information please see particle-shift.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ParticleShift",[],e):"object"==typeof exports?exports.ParticleShift=e():t.ParticleShift=e()}(this,(function(){return(()=>{"use strict";var t={"./src/classes/Body.js":(t,e,i)=>{i.r(e),i.d(e,{Body:()=>r});var r={create:function(t){var e=Object.create(this);return Object.assign(e,t),e}}},"./src/classes/Particle.js":(t,e,i)=>{i.r(e),i.d(e,{Particle:()=>a});var r=i("./src/utils.js"),a={create:function(t,e,i){var a=Object.create(this),s={id:i,x:e[0]+(0,r.random)(t.spawn_scatter)-t.spawn_scatter/2,y:e[1]+(0,r.random)(t.spawn_scatter)-t.spawn_scatter/2,r:e[2][0],g:e[2][1],b:e[2][2],a:e[2][3],final_x:e[0],final_y:e[1],final_r:e[2][0],final_g:e[2][1],final_b:e[2][2],final_a:e[2][3]};return Object.assign(a,s),a},draw:function(t){t.ctx.fillStyle="rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")",t.particle_type&&"rect"!=t.particle_type?"circ"==t.particle_type&&(t.ctx.beginPath(),t.ctx.arc(this.x*t.draw_multiplier-t.draw_particle_size/2,this.y*t.draw_multiplier-t.draw_particle_size/2,t.draw_particle_size,0,2*Math.PI),t.ctx.fill()):t.ctx.fillRect(this.x*t.draw_multiplier-t.draw_particle_size/2,this.y*t.draw_multiplier-t.draw_particle_size/2,t.draw_particle_size,t.draw_particle_size)},update:function(t){var e=this,i=t.tick+this.id,a=(0,r.line_distance)([this.x,this.y],[this.final_x,this.final_y]),s=t.current_screen.bodies,c=!1;if(s&&s.map((function(t){var i=(0,r.line_distance)([e.x,e.y],[t.x,t.y]);if(i<t.radius){c=!0;var a=(t.force+(t.radius-i)/10*t.force)/i;e.x=(1-a)*e.x+a*t.x,e.y=(1-a)*e.y+a*t.y}})),!c)if(a<2)this.x=this.final_x,this.y=this.final_y;else{var n=(t.particle_speed+a*t.particle_speed_distance)/a;this.x=(1-n)*this.x+n*this.final_x+Math.sin(i/10)*t.particle_wobble,this.y=(1-n)*this.y+n*this.final_y+Math.sin(i/10)*t.particle_wobble}["r","g","b","a"].map((function(i){if(e[i]!==e["final_"+i]){var r=e[i]>e["final_"+i];e[i]+=(r?-1:1)*t.color_shift_speed}}))}}},"./src/classes/Scene.js":(t,e,i)=>{i.r(e),i.d(e,{Scene:()=>s});var r=i("./src/classes/Particle.js"),a=i("./src/utils.js"),s={create:function(t){var e=Object.create(this),i=document.querySelector(t.selector),r=i.getContext("2d");i.width=t.draw_width,i.height=t.draw_height;var a={canvas:i,ctx:r,particle_size:2,step_width:6,particle_type:"rect",draw_width:1e3,draw_height:600,draw_multiplier:1,spawn_scatter:250,shuffle_spawn:!0,particle_speed:1,particle_speed_distance:.05,particle_wobble:.2,color_shift_speed:4,show_fps:!1,tick:0,fps:60,last_frame_call:0,pre_render_frames_count:!1,pre_render_frames:[],active:!1,current_screen:!1};return Object.assign(e,a,t),e},resize:function(){var t=this.canvas.getBoundingClientRect().width,e=Math.ceil(t*(this.draw_height/this.draw_width));canvas.width=t,canvas.height=e,this.width=t,this.height=e,this.draw_multiplier=t/this.draw_width},add_screen:function(t){this.screens.push(t)},play_screen:function(t){this.current_screen=t,this.setup_particles(t),this.resize(),this.last_frame_call||(this.last_frame_call=performance.now()),this.active||(this.active=!0,window.addEventListener("resize",this.resize.bind(this)),this.draw())},draw:function(){var t=this;this.tick++,this.ctx.clearRect(0,0,this.width,this.height),this.current_screen.bodies&&this.current_screen.bodies.forEach((function(e){e.update&&e.update(t,t.ctx),e.render&&e.render(t,t.ctx)})),this.draw_particle_size=this.particle_size*this.draw_multiplier,this.particles.forEach((function(e){e.update(t),e.draw(t)})),this.pre_render_frames_count&&this.pre_render(),this.show_fps&&this.draw_fps(),window.requestAnimationFrame((function(){t.draw()}))},draw_fps:function(){var t=performance.now();this.tick%20==0&&(this.fps=Math.round(1/((t-this.last_frame_call)/1e3))),this.last_frame_call=t,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,75,25),this.ctx.font="12px Courier",this.ctx.fillStyle="white",this.ctx.fillText("FPS:"+this.fps,16,15)},pre_render:function(){var t=this;if(this.pre_render_frames.push(this.ctx.getImageData(0,0,this.draw_width,this.draw_height)),this.pre_render_frames_count--,0==this.pre_render_frames_count){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=this.draw_width,e.height=this.draw_height*this.pre_render_frames.length,this.pre_render_frames.forEach((function(e,r){i.putImageData(e,0,r*t.draw_height)})),document.body.appendChild(e)}},particles:[],setup_particles:function(t){var e,i=this;this.ctx;if(e=this.shuffle_spawn?(0,a.shuffle)(t.particles.map((function(t,e){return r.Particle.create(i,t,e)}))):t.particles.map((function(t,e){return r.Particle.create(i,t,e)})),this.particles.length>0){this.particles.length,e.length;e.map((function(t,e){i.particles[e]&&["x","y","r","g","b","a"].map((function(r){t[r]=i.particles[e][r]}))}))}else e.map((function(t,e){t.a=0}));this.particles=e}}},"./src/classes/Screen.js":(t,e,i)=>{i.r(e),i.d(e,{Screen:()=>r});var r={create:function(t,e){var i=Object.create(this);e.render(t,t.ctx);var r=0,a=0,s=[],c=t.ctx.getImageData(0,0,t.draw_width,t.draw_height),n=c.data;for(i.draw_width=t.draw_width,i.draw_height=t.draw_height,t.ctx.clearRect(0,0,t.draw_width,t.draw_height);r<t.draw_width;){for(a=0;a<t.draw_height;){var h=4*(a*t.draw_width+r);0!==n[h+3]&&s.push([r,a,[n[h],n[h+1],n[h+2],n[h+3]]]),a+=t.step_width}r+=t.step_width}return Object.assign(i,{settings:e,image:c,particles:s,bodies:e.bodies}),i},debug:function(){var t=document.createElement("div"),e=document.createElement("canvas");e.width=this.draw_width,e.height=this.draw_height,e.getContext("2d").putImageData(this.image,0,0);var i=document.createElement("h6");i.innerHTML="Particles: "+this.particles.length,t.appendChild(i),t.appendChild(e),document.body.appendChild(t)}}},"./src/index.js":(t,e,i)=>{i.r(e),i.d(e,{Scene:()=>r.Scene,Screen:()=>a.Screen,Body:()=>s.Body});var r=i("./src/classes/Scene.js"),a=i("./src/classes/Screen.js"),s=i("./src/classes/Body.js")},"./src/utils.js":(t,e,i)=>{function r(t,e){var i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function a(t){return Math.floor(Math.random()*t+1)}function s(t){for(var e,i,r=t.length;0!==r;)i=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[i],t[i]=e;return t}i.r(e),i.d(e,{line_distance:()=>r,random:()=>a,shuffle:()=>s})}},e={};function i(r){if(e[r])return e[r].exports;var a=e[r]={exports:{}};return t[r](a,a.exports,i),a.exports}return i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i("./src/index.js")})()}));
//# sourceMappingURL=particle-shift.min.js.map